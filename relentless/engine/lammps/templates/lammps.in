# LAMMPS input script, generated by relentless

## initialization
{% block init %}
units lj
boundary p p p
atom_style atomic

# place randomly in cubic box
{%set L = ensemble.V**(1.0/3.0) %}
region cube block 0.0 {{ L }} 0.0 {{ L }} 0.0 {{ L }}
create_box {{ ensemble.types|length }} cube
{% for t,n in ensemble.N.items() %}
create_atoms {{ t }} random {{ n }} {{ options.seed + loop.index }} cube
{% endfor %}
mass * 1.0
{% endblock %}

## potentials
{% block potentials %}
pair_style table linear {{ size }}
{% for pair,file in files.items() %}
pair_coeff {{ pair.0 }} {{ pair.1 }} {{ file }} TABLE_{{ pair.0 }}_{{ pair.1 }}
{% endfor %}
{% endblock %}

## equilibration
{% block equilibration %}
# remove initial overlaps
minimize 1.0e-4 1.0e-6 100 1000

# thermalize at initialize temperature
velocity all create {{ ensemble.T }} {{ options.seed }}

# integrator
timestep {{ options.dt }}
{% block integrator %}{% endblock %}

# equilibrate
run {{ options.eq }}
{% endblock %}

## analysis
{% block analysis %}
compute rdf all rdf {{ options.dump }} {% for pair in files %} {{ pair|join(' ') }}{% endfor %}

fix rdf all ave/time {{ options.dump }} 1 {{ options.dump }} c_rdf[*] mode vector ave running overwrite file rdf.lammps

thermo {{ options.dump }}
thermo_style custom step temp press vol
thermo_modify norm no flush yes
{% endblock %}

## production
{% block production %}
print 'RELENTLESS PRODUCTION'
run {{ options.sample }}
{% endblock %}
